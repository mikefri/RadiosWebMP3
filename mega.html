<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lecteur audio MEGA</title>
</head>
<body>
  <h1>Lecteur audio depuis MEGA</h1>
  
  <button onclick="loginToMega()">Se connecter à MEGA</button>
  <div id="audio-list"></div>

  <!-- Charger le SDK MEGA -->
  <script src="https://unpkg.com/megajs@1.3.7/dist/main.browser-umd.js"></script>

  <script>
    let megaClient;

    // Fonction pour se connecter à MEGA
    function loginToMega() {
      megaClient = mega();

      // Remplace 'votre_email' et 'votre_mot_de_passe' par tes identifiants MEGA
      megaClient.login('mikefri58@gmail.com', 'Fm01031985@', function(err) {
        if (err) {
          console.error('Erreur de connexion:', err);
        } else {
          console.log('Connexion réussie!');
          listAudioFiles();
        }
      });
    }

    // Fonction pour lister les fichiers audio depuis MEGA
    function listAudioFiles() {
      // Spécifier le dossier MEGA où se trouvent les fichiers audio (si nécessaire)
      const folderLink = 'lien_vers_le_dossier_mega'; // Remplace avec le lien vers ton dossier MEGA

      megaClient.download(folderLink, function(files) {
        const audioListContainer = document.getElementById('audio-list');
        
        // Si des fichiers sont trouvés
        if (files.length > 0) {
          files.forEach((file) => {
            const fileDiv = document.createElement('div');
            fileDiv.innerHTML = `
              <h3>${file.name}</h3>
              <audio controls>
                <source src="${file.url}" type="${file.mime}">
                Votre navigateur ne supporte pas l'audio.
              </audio>
            `;
            audioListContainer.appendChild(fileDiv);
          });
        } else {
          audioListContainer.innerHTML = 'Aucun fichier audio trouvé dans ce dossier.';
        }
      });
    }
  </script>
</body>
</html>
