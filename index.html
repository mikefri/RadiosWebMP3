<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lecteur Audio Google Drive</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }
        .audio-container {
            margin-top: 20px;
        }
        audio {
            margin: 10px;
        }
    </style>
</head>
<body>
    <h1>Lecteur Audio Google Drive</h1>
    <div id="audio-list" class="audio-container"></div>

    <script src="https://apis.google.com/js/api.js"></script>
    <script>
        // ID de ton dossier Google Drive
        const folderId = '11n9RVF-ZjTBOLMvoYB7asAs4A8hUfeYu'; 

        // Ta clé API Google
        const apiKey = 'AIzaSyCFIShJe5FjUrK00QAq7zGxHhXLuTbKxZA';

        function init() {
            gapi.client.init({
                apiKey: apiKey,
            }).then(() => {
                listFiles(folderId);
            });
        }

        function listFiles(folderId) {
            gapi.client.drive.files.list({
                q: `'${folderId}' in parents`,
                fields: 'files(id, name, mimeType)',
            }).then((response) => {
                const files = response.result.files;
                if (files && files.length > 0) {
                    files.forEach(file => {
                        if (file.mimeType === 'audio/mpeg') {  // Vérifie que c'est un fichier audio
                            const audioElement = document.createElement('div');
                            audioElement.innerHTML = `
                                <h2>${file.name}</h2>
                                <audio controls>
                                    <source src="https://drive.google.com/uc?export=download&id=${file.id}" type="audio/mp3">
                                    Votre navigateur ne prend pas en charge la balise audio.
                                </audio>
                            `;
                            document.getElementById('audio-list').appendChild(audioElement);
                        }
                    });
                } else {
                    console.log('Aucun fichier audio trouvé dans le dossier.');
                }
            });
        }

        gapi.load('client', init);
    </script>
</body>
</html>
